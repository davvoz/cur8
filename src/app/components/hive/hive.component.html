<div class="desktop" >
    <mat-grid-list [cols]="isMobile?1:6" class="grid_list" rowHeight="150px">
        <!--USER CUR8 (LOGIN)-->
        <mat-grid-tile [colspan]="isMobile?1:2" [rowspan]="2" class="tile">
            <mat-card class="card" style="overflow: hidden;">
                <mat-card-header>
                    <div class="card_tittle">
                        <div>Your cur8 stats</div>
                        <!--icona ?-->
                        <div> <mat-icon
                                matTooltip="View your statistics related to the delegation made to Cur8, including the amount delegated, the last payment received, and your share percentage">help</mat-icon>
                        </div>

                    </div>
                </mat-card-header>
                <mat-card-content class="card_content">
                    <!--inserisci nome come input--><br>
                    <div class="form_container">
                        <div class="form_content">
                            <mat-label>User</mat-label>
                            <input matInput placeholder="username" type="text" [(ngModel)]="user.username" (keyup.enter)="refresh()">
                        </div>
                    </div><br>
                    <div>Delegated {{ user.rapportoConCUR8.delega | reversePadZero}} HP</div>

                    <br>
                    <div>
                        Your share {{user.rapportoConCUR8.share | reversePadZero}}%
                    </div><br>
                    <div>
                        Last payout {{ user.rapportoConCUR8.ultimoPagamento.importo}}&nbsp;&nbsp;&nbsp;
                        {{ user.rapportoConCUR8.ultimoPagamento.data | dateFormat}} 
                    </div>
                </mat-card-content>
                <mat-card-actions class="c_actions">
                    <button mat-raised-button class="action" color="primary" (click)="refresh()">
                        Search
                    </button>
                </mat-card-actions>
            </mat-card>
        </mat-grid-tile>

        <!--DELEGA-->
        <mat-grid-tile [colspan]="isMobile?1:2" [rowspan]="2" class="tile">
            <mat-spinner *ngIf="isLoading"></mat-spinner>

            <mat-card class="card" *ngIf="!isLoading">
                <mat-card-header class="card_header">
                    <div class="card_tittle">
                        <div>Delegate to cur8</div>
                        <!--icona ?-->
                        <div> <mat-icon
                                matTooltip="Delegate Hive Power to Cur8 to participate in the project and earn rewards. Enter the amount of Hive Power you wish to delegate and view the estimated daily profit. First payment will be after 7 days">help</mat-icon>
                        </div>
                    </div>
                </mat-card-header>
                <mat-card-content class="card_content">
                    <div class="form_container">
                        <div class="form_content">
                            <mat-label>Amount</mat-label>
                            <input matInput placeholder="0" type="number" [(ngModel)]="valoreDelega"
                                (ngModelChange)="changeDailyProfit()">
                        </div>
                    </div><br>
                    <div *ngIf="!isLoading">
                        Est. daily profit
                        {{estimatedDailyProfit | reversePadZero}}
                        HIVE
                    </div><br>
                    <div *ngIf="!isLoading">
                        Available
                        {{ !user.rapportoConCUR8.powerDisponibili ? '0' : user.rapportoConCUR8.powerDisponibili -
                        user.totalExpiringDelegations | reversePadZero}}
                        HP
                    </div>
                </mat-card-content>
                <mat-card-actions class="c_actions" *ngIf="!isLoading">
                    <button mat-raised-button class="action" color="primary" (click)="delega()">Delegate</button>
                </mat-card-actions>
            </mat-card>
        </mat-grid-tile>

        <!--SOCIAL-->
        <mat-grid-tile [colspan]="isMobile?1:2" [rowspan]="4" class="tile">
            <mat-spinner *ngIf="isLoading"></mat-spinner>
            <mat-card class="card_special" *ngIf="!isLoading">
                <mat-card-header class="card_header_special">
                    <div class="card_tittle" *ngIf="loaded">{{usernameView}}</div>
                    <div class="card_subtitle" *ngIf="loaded">Level
                        {{user.social.level}}</div>
                </mat-card-header>
                <mat-card-content class="card_content">
                    <br>
                    <div class="profile_image" *ngIf="!loaded">
                        <img [src]="defaultImage" alt="User">
                    </div>
                    <div class="profile_image" *ngIf="loaded">
                        <img [src]="user.image" alt="User">
                    </div>
                    <br><br>
                    <div class="social">
                        {{!user.social.followers?'0':user.social.followers}} followers
                        {{!user.social.following?'0':user.social.following}} following
                        {{!user.social.postsNumber?'0':user.social.postsNumber}} posts
                    </div><br>

                    <table class="tb">
                        <tr>
                            <td>HIVE</td>
                            <td>{{user.valutes.HIVE | reversePadZero}}</td>
                        </tr>
                        <tr>
                            <td>HBD</td>
                            <td> {{user.valutes.HBD | reversePadZero}}</td>
                        </tr>
                        <tr>
                            <td>HP</td>
                            <td>{{user.valutes.HP | reversePadZero}}</td>
                        </tr>
                    </table>

                    <br>
                    <div class="valore_account">
                        Account value
                        {{(user.valutes.HIVE + user.valutes.HP) * gs.globalPrezzi.price + user.valutes.HBD *
                        gs.globalPrezzi.price_dollar | reversePadZero}}$

                    </div>

                </mat-card-content>
            </mat-card>
        </mat-grid-tile>

        <!--POWER UP/DOWN-->
        <mat-grid-tile [colspan]="isMobile?1:2" [rowspan]="2" class="tile">
            <mat-card class="card">
                <mat-card-header class="card_header">
                    <div class="card_tittle">
                        <div>Power Up/Down</div>
                        <div> <mat-icon
                                matTooltip="Perform Power Up operations to convert liquid Hive into Hive Power or Power Down operations to convert Hive Power back into liquid Hive. Power Up is immediate, while Power Down takes 13 weeks to complete">help</mat-icon>
                        </div>

                    </div>
                </mat-card-header>
                <mat-card-content class="card_content">

                    <br>
                    <div class="form_container">
                        <div class="form_content">
                            <mat-label>Amount</mat-label>
                            <input matInput placeholder="0" type="number" [(ngModel)]="powerUpHPValue">
                        </div>
                        <br>
                    </div>
                </mat-card-content>
                <mat-card-actions class="c_actions">
                    <div class="buttons_container">

                        <button mat-raised-button class="action" color="primary" (click)="powerUpHP()">Power Up
                            <mat-icon>arrow_upward</mat-icon>

                        </button>
                        <button mat-raised-button class="action" color="warn" (click)="powerDownHP()">Power Down
                            <mat-icon>arrow_downward</mat-icon>

                        </button>

                    </div>
                </mat-card-actions>
            </mat-card>
        </mat-grid-tile>

        <!--Send STEEM/SBD-->
        <mat-grid-tile [colspan]="isMobile?1:2" [rowspan]="2" class="tile">
            <mat-card class="card">
                <mat-card-header class="card_header">
                    <div class="card_tittle">
                        <div>Send HIVE/HBD</div>
                        <div> <mat-icon
                                matTooltip="Send HIVE or HBD to another wallet by entering the recipient account name and the desired amount">help</mat-icon>
                        </div>

                    </div>


                </mat-card-header>
                <mat-card-content class="card_content">
                    <br>
                    <div class="form_container">
                        <div class="form_content">
                            <mat-label>To</mat-label>
                            <input matInput placeholder="username" type="text" [(ngModel)]="sendTo">
                        </div>
                        <div class="form_content">
                            <mat-label>Amount</mat-label>
                            <input matInput placeholder="0" type="text" [(ngModel)]="sendAmount">
                        </div>
                        <br>
                    </div>
                </mat-card-content>
                <mat-card-actions class="c_actions">
                    <div class="buttons_container">
                        <button mat-raised-button class="action" color="primary" (click)="sendHive()">Send HIVE</button>
                        <button mat-raised-button class="action" color="primary" (click)="sendHbd()">Send HBD</button>
                    </div>
                </mat-card-actions>
            </mat-card>
        </mat-grid-tile>

        <!--Expairing Delegation-->
        <mat-grid-tile [colspan]="isMobile?1:3" [rowspan]="4" class="tile">
            <mat-card class="card tabloCard">
                <mat-card-header class="card_header">
                    <div class="card_tittle">Expiring Delegation</div>
                </mat-card-header>
                <mat-card-content class="card_content tablo">
                    <!--mat table , account , ammount ,exp date--><br>
                    <table class="mat-elevation-z8a">
                        <tr>
                            <th>Amount</th>
                            <th>Exp Date</th>
                        </tr>
                        <tr *ngFor="let item of user.expiringDelegations">
                            <td>{{item.vesting_shares| reversePadZero}} HP</td>
                            <td>{{item.expiration | dateFormat}} </td>
                        </tr>
                    </table>
                </mat-card-content>
            </mat-card>
        </mat-grid-tile>

        <!--LISTA TRANSAZIONI-->
        <mat-grid-tile [colspan]="isMobile?1:3" [rowspan]="4" class="tile">
            <mat-spinner *ngIf="isLoading"></mat-spinner>
            <mat-card class="card" *ngIf="!isLoading">
                <mat-card-header class="c_lista_header">
                    <div class="card_tittle"><span>Transactions</span>
                    </div>
                    <div>

                        <button mat-icon-button (click)="refresh()" class="refresh" color="accent">
                            <mat-icon>refresh</mat-icon>
                        </button>
                    </div>
                </mat-card-header>
                <mat-card-content class="card_content c_lista">
                    <br>
                    @for (item of user.transactions; track $index) {
                    <div class="we">
                        <div class="we_title">
                            <h1>
                                from {{item.from}}
                                @if(item.to==user.username){
                                <span appColoreRank [style.color]="'lime'"> {{item.amount}}</span>
                                }@else{
                                <span appColoreRank [style.color]="'red'"> {{item.amount}}</span>
                                }
                                to {{item.to}}
                            </h1>
                            <mat-icon *ngIf="item.from==user.username" class="freccia_rossa">arrow_upward</mat-icon>
                            <mat-icon *ngIf="item.to==user.username" class="freccia_verde">arrow_downward</mat-icon>
                        </div>
                        <div class="we_content">
                            <div mat-line>{{item.timestamp | dateFormat}} </div>
                        </div>
                    </div>
                    <div mat-line>{{item.memo}}</div>
                    <br>
                    <mat-divider> </mat-divider>

                    }
                </mat-card-content>
            </mat-card>
        </mat-grid-tile>
    </mat-grid-list>
</div>
<br><br><br>


<style>
    .we_title {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        flex-wrap: nowrap;
        align-items: center;
        width: 100%;
    }

    .freccia_rossa {
        color: red;
    }

    .freccia_verde {
        color: lime;
    }

    .buttons_container {
        display: flex;
        justify-content: space-around;
    }

    button {
        cursor: pointer;
    }

    .tb {
        width: 100%;
        padding-left: 30%;
        padding-right: 30%;
    }
</style>